<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Test Delivery Account - Medify</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .create-account-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #fff8e1 0%, #ffe0b2 100%);
            padding: 2rem;
        }
        .create-account-card {
            background: #fff;
            border-radius: 16px;
            padding: 2.5rem;
            max-width: 440px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
        }
        .create-account-card h1 {
            color: #e65100;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .create-account-card p {
            color: #546e7a;
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
        }
        .create-account-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.9rem 1.5rem;
            background: linear-gradient(135deg, #e65100 0%, #ff9800 100%);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: opacity 0.2s, transform 0.1s;
        }
        .create-account-btn:hover {
            opacity: 0.95;
        }
        .create-account-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        .credentials-box {
            margin-top: 1.5rem;
            padding: 1.25rem;
            background: #fff8e1;
            border: 1px solid #ffcc80;
            border-radius: 10px;
            text-align: left;
            display: none;
        }
        .credentials-box.show {
            display: block;
        }
        .credentials-box h3 {
            margin: 0 0 0.75rem;
            font-size: 1rem;
            color: #e65100;
        }
        .credentials-box .row {
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }
        .credentials-box .label {
            color: #546e7a;
            margin-right: 0.5rem;
        }
        .credentials-box .value {
            font-weight: 600;
            color: #263238;
            font-family: monospace;
        }
        .credentials-box .hint {
            margin-top: 0.75rem;
            font-size: 0.85rem;
            color: #5d4037;
        }
        .create-account-error {
            margin-top: 1rem;
            padding: 0.75rem;
            background: #ffebee;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #c62828;
            display: none;
        }
        .create-account-error.show {
            display: block;
        }
        .back-link {
            display: inline-block;
            margin-top: 1.5rem;
            color: #e65100;
            text-decoration: none;
            font-size: 0.9rem;
        }
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="create-account-page">
        <div class="create-account-card">
            <h1><i class="fas fa-motorcycle"></i> Test Delivery Partner</h1>
            <p>Create a dummy account in Firebase so you can log in as a Delivery Partner.</p>

            <button type="button" class="create-account-btn" id="create-btn">
                <i class="fas fa-user-plus"></i>
                Create delivery@medify.com account
            </button>

            <div class="credentials-box" id="credentials-box">
                <h3><i class="fas fa-check-circle"></i> Use these to login</h3>
                <div class="row"><span class="label">Email:</span><span class="value" id="cred-email">delivery@medify.com</span></div>
                <div class="row"><span class="label">Password:</span><span class="value" id="cred-password">MedifyDelivery@123</span></div>
                <p class="hint">On the home page, click Login → choose <strong>Delivery Partner</strong> → enter the email and password above.</p>
            </div>

            <div class="create-account-error" id="error-msg"></div>

            <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Medify</a>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        (function() {
            var TEST_EMAIL = 'delivery@medify.com';
            var TEST_PASSWORD = 'MedifyDelivery@123';

            var btn = document.getElementById('create-btn');
            var credentialsBox = document.getElementById('credentials-box');
            var errorMsg = document.getElementById('error-msg');

            function showError(msg) {
                errorMsg.textContent = msg;
                errorMsg.classList.add('show');
                credentialsBox.classList.remove('show');
            }

            function showSuccess() {
                errorMsg.classList.remove('show');
                document.getElementById('cred-email').textContent = TEST_EMAIL;
                document.getElementById('cred-password').textContent = TEST_PASSWORD;
                credentialsBox.classList.add('show');
            }

            btn.addEventListener('click', function() {
                if (!window.firebaseAuth) {
                    showError('Firebase is not loaded. Check your connection.');
                    return;
                }
                btn.disabled = true;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating...';
                errorMsg.classList.remove('show');

                window.firebaseAuth.createUserWithEmailAndPassword(TEST_EMAIL, TEST_PASSWORD)
                    .then(function() {
                        btn.innerHTML = '<i class="fas fa-check"></i> Account created';
                        showSuccess();
                    })
                    .catch(function(err) {
                        btn.disabled = false;
                        btn.innerHTML = '<i class="fas fa-user-plus"></i> Create delivery@medify.com account';
                        if (err.code === 'auth/email-already-in-use') {
                            showSuccess();
                            credentialsBox.querySelector('.hint').innerHTML = 'This account already exists. Use the credentials above to login as <strong>Delivery Partner</strong>.';
                        } else {
                            showError(err.message || 'Could not create account. Try again.');
                        }
                    });
            });
        })();
    </script>
</body>
</html>
